<?xml version="1.0" encoding="UTF-8"?>
<!--
Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
Click nbfs://nbhost/SystemFileSystem/Templates/XML/XMLDocument.xml to edit this template
-->



<root>
    -- ðŸ“Œ Criando o banco de dados Condominio
-- Cria o banco de dados "Condominio" se ele nÃ£o existir
CREATE DATABASE Condominio;
-- Seleciona o banco de dados "Condominio" para ser utilizado
USE Condominio;

drop database Condominio

-- ðŸ“Œ Apagando tabelas se jÃ¡ existirem
-- Remove as tabelas caso elas jÃ¡ existam no banco de dados
DROP TABLE IF EXISTS ControleReserva;
DROP TABLE IF EXISTS Atividade;
DROP TABLE IF EXISTS Reserva;
DROP TABLE IF EXISTS Chave;
DROP TABLE IF EXISTS Morador;
DROP TABLE IF EXISTS Funcionario;
DROP TABLE IF EXISTS Unidade;

-- ðŸ“Œ Apaga o banco de dados "Condominio" se necessÃ¡rio (nÃ£o recomendado em produÃ§Ã£o)
-- DROP DATABASE Condominio;

-- ðŸ“Œ Criando a tabela Unidade
-- Cria a tabela "Unidade", que armazenarÃ¡ informaÃ§Ãµes sobre os imÃ³veis do condomÃ­nio
CREATE TABLE Unidade (
    id_unidade INT PRIMARY KEY IDENTITY (1,3),  -- A coluna 'id_unidade' Ã© a chave primÃ¡ria com incremento de 3 em 3
	id_chave INT FOREIGN KEY REFERENCES Chave(id_chave) NOT NULL, -- ReferÃªncia Ã  unidade Ã  qual a chave pertence
	tipo VARCHAR(50) NOT NULL,                   -- Tipo do imÃ³vel (ex: Apartamento, Casa)
    numero VARCHAR(10) NOT NULL,                 -- NÃºmero da unidade
    bloco VARCHAR(10) NOT NULL,                  -- Bloco da unidade
    capacidade VARCHAR(10) NOT NULL,             -- Capacidade de pessoas da unidade
    descricao VARCHAR(255),                      -- DescriÃ§Ã£o do imÃ³vel
    nome VARCHAR(100) ,                  -- Nome do condomÃ­nio
    dimensoes VARCHAR(50)                       -- DimensÃµes da unidade                 -- DimensÃµes da unidade
);

-- ðŸ“Œ Criando a tabela Funcionario
-- Cria a tabela "Funcionario", que armazenarÃ¡ dados dos funcionÃ¡rios do condomÃ­nio
CREATE TABLE Funcionario (
    id_funcionario INT PRIMARY KEY IDENTITY (1,3), -- A coluna 'id_funcionario' Ã© a chave primÃ¡ria com incremento de 3 em 3
    nome VARCHAR(100) NOT NULL,                      -- Nome do funcionÃ¡rio
    cpf VARCHAR(14) UNIQUE NOT NULL,                 -- CPF do funcionÃ¡rio (Ãºnico)
    telefone VARCHAR(20) NOT NULL,                   -- Telefone do funcionÃ¡rio
    endereco VARCHAR(200) NOT NULL,                  -- EndereÃ§o do funcionÃ¡rio
    departamento VARCHAR(100) NOT NULL,              -- Departamento do funcionÃ¡rio (ex: SeguranÃ§a, ManutenÃ§Ã£o)
    senha VARCHAR(255)                               -- Senha de acesso do funcionÃ¡rio
);

-- ðŸ“Œ Criando a tabela Morador
-- Cria a tabela "Morador", que armazenarÃ¡ dados dos moradores do condomÃ­nio
CREATE TABLE Morador (
    id_morador INT PRIMARY KEY IDENTITY (1,3), -- A coluna 'id_morador' Ã© a chave primÃ¡ria com incremento de 3 em 3
    id_unidade INT FOREIGN KEY REFERENCES Unidade (id_unidade) NOT NULL, -- ReferÃªncia Ã  tabela Unidade, associando o morador Ã  unidade
    nome VARCHAR(100) NOT NULL, -- Nome do morador
    cpf VARCHAR(14) UNIQUE NOT NULL, -- CPF do morador (Ãºnico)
    email VARCHAR(100) NOT NULL, -- Email do morador
    data_nasc  VARCHAR(10) NOT NULL -- Data de nascimento do morador
);

-- ðŸ“Œ Criando a tabela Chave
-- Cria a tabela "Chave", que armazenarÃ¡ informaÃ§Ãµes sobre as chaves das unidades
CREATE TABLE Chave (
    id_chave INT PRIMARY KEY IDENTITY (1,3), -- A coluna 'id_chave' Ã© a chave primÃ¡ria com incremento de 3 em 3
    nome VARCHAR(50) NOT NULL -- Nome da chave (ex: Chave da piscina)
);

-- ðŸ“Œ Criando a tabela Reserva
-- Cria a tabela "Reserva", que gerenciarÃ¡ as reservas de chaves pelos moradores
CREATE TABLE Reserva (
    id_reserva INT PRIMARY KEY IDENTITY (1,3), -- A coluna 'id_reserva' Ã© a chave primÃ¡ria com incremento de 3 em 3
    id_chave INT FOREIGN KEY (id_chave) REFERENCES Chave(id_chave) NOT NULL, -- Chave que estÃ¡ sendo reservada
    id_morador INT FOREIGN KEY (id_morador) REFERENCES Morador(id_morador) NOT NULL, -- Morador que fez a reserva
    id_unidade INT FOREIGN KEY (id_unidade) REFERENCES Unidade(id_unidade) NOT NULL, -- Unidade relacionada Ã  reserva
    id_funcionario INT FOREIGN KEY (id_funcionario) REFERENCES Funcionario(id_funcionario) NOT NULL, -- FuncionÃ¡rio que gerencia a reserva
    data_reserva DATE NOT NULL, -- Data da reserva
    statu VARCHAR(20) NOT NULL DEFAULT 'pendente' -- Status da reserva (ex: pendente, aprovada, cancelada)
);

-- ðŸ“Œ Criando a tabela Atividade
-- Cria a tabela "Atividade", que armazenarÃ¡ atividades realizadas pelos funcionÃ¡rios
CREATE TABLE Atividade (
    id_atividade INT PRIMARY KEY IDENTITY (1,3), -- A coluna 'id_atividade' Ã© a chave primÃ¡ria com incremento de 3 em 3
    id_funcionario INT FOREIGN KEY (id_funcionario) REFERENCES Funcionario(id_funcionario) NOT NULL, -- FuncionÃ¡rio responsÃ¡vel pela atividade
    nome VARCHAR(100) NOT NULL, -- Nome da atividade
    descricao VARCHAR(255), -- DescriÃ§Ã£o da atividade
    datas DATE NOT NULL, -- Data da atividade
    statu VARCHAR(20) DEFAULT 'pendente' -- Status da atividade (ex: pendente, concluÃ­da)
);

-- ðŸ“Œ Criando a tabela ControleReserva
-- Cria a tabela "ControleReserva", que gerencia a entrega e devoluÃ§Ã£o das chaves
CREATE TABLE ControleReserva (
    id_controleReserva INT PRIMARY KEY IDENTITY (1,3), -- A coluna 'id_controleReserva' Ã© a chave primÃ¡ria com incremento de 3 em 3
    id_reserva INT FOREIGN KEY (id_reserva) REFERENCES Reserva(id_reserva) NOT NULL, -- ReferÃªncia Ã  reserva associada
    data_entrega DATE NOT NULL, -- Data de entrega da chave
    data_devolucao DATE, -- Data de devoluÃ§Ã£o da chave
    funcionario_entrega VARCHAR(100) NOT NULL, -- FuncionÃ¡rio responsÃ¡vel pela entrega
    funcionario_devolucao VARCHAR(100) -- FuncionÃ¡rio responsÃ¡vel pela devoluÃ§Ã£o
);

-- Inserindo dados na tabela Unidade
-- Insere dados de exemplo na tabela "Unidade", representando os imÃ³veis do condomÃ­nio
INSERT INTO Unidade (id_chave,tipo, numero, bloco, capacidade, descricao, nome, dimensoes)
VALUES
(1,'Apartamento', '101', 'A', '4', 'Apartamento tÃ©rreo', 'Residencial Alpha', '80mÂ²'),
(4,'Casa', 'B12', 'B', '6', 'Casa com quintal', 'CondomÃ­nio Verde', '120mÂ²'),
(7,'Apartamento', '305', 'C', '3', 'Apartamento com vista', 'Residencial Beta', '90mÂ²');
SELECT* FROM Unidade;
-- Inserindo dados na tabela Funcionario
-- Insere dados de exemplo na tabela "Funcionario", representando os funcionÃ¡rios do condomÃ­nio
INSERT INTO Funcionario (nome, cpf, telefone, endereco, departamento, senha)
VALUES
('Robertin', '400.289.231-04', '(11) 92156-7890', 'Rua Perola, 789', 'Porteiro', 'port123'),
('Bolt Wirtz', '145.654.801-03', '(11) 9678-7901', 'Rua dos Couves, 194', 'Sindico', 'adm123'),
('Carlos Souza', '123.456.789-01', '(11) 98765-4321', 'Rua das Flores, 123', 'SeguranÃ§a', 'senha123'),
('Mariana Lima', '987.654.321-02', '(11) 91234-5678', 'Av. Central, 456', 'AdministraÃ§Ã£o', 'admin456'),
('Roberto Alves', '111.222.333-44', '(11) 93456-7890', 'Rua Verde, 789', 'ManutenÃ§Ã£o', 'manut789');

-- Inserindo dados na tabela Morador
-- Insere dados de exemplo na tabela "Morador", associando os moradores Ã s unidades
INSERT INTO Morador (id_unidade, nome, cpf, email, data_nasc)
VALUES
(7, 'Ana Pereira', '555.666.777-88', 'ana@email.com', '1985-07-15'),
(1, 'JoÃ£o Mendes', '999.888.777-66', 'joao@email.com', '1990-02-25'),
(4, 'Fernanda Costa', '444.333.222-11', 'fernanda@email.com', '1982-11-10');

SELECT*FROM Morador;

-- Inserindo dados na tabela Chave
-- Insere dados de exemplo na tabela "Chave", associando as chaves Ã s unidades
INSERT INTO Chave
VALUES
('Chave do salÃ£o de festas'),
('Chave da piscina'),
('Chave da garagem');

-- Inserindo dados na tabela Reserva
-- Insere dados de exemplo na tabela "Reserva", criando algumas reservas
INSERT INTO Reserva (data_reserva, statu)
VALUES
('2025-02-10', 'pendente'),
('2025-02-12', 'aprovada'),
('2025-02-15', 'cancelada');

-- Inserindo dados na tabela Atividade
-- Insere dados de exemplo na tabela "Atividade", representando algumas atividades no condomÃ­nio
INSERT INTO Atividade (nome, descricao, datas, statu)
VALUES
('Troca de lÃ¢mpadas', 'SubstituiÃ§Ã£o das lÃ¢mpadas queimadas nas Ã¡reas comuns', '2025-02-05', 'concluÃ­da'),
('Ronda noturna', 'Monitoramento da seguranÃ§a do condomÃ­nio', '2025-02-06', 'pendente'),
('ReuniÃ£o com moradores', 'DiscussÃ£o sobre novas regras do condomÃ­nio', '2025-02-07', 'concluÃ­da');

-- Inserindo dados na tabela ControleReserva
-- Insere dados de exemplo na tabela "ControleReserva", controlando a entrega e devoluÃ§Ã£o das chaves
INSERT INTO ControleReserva (data_entrega, data_devolucao, funcionario_entrega, funcionario_devolucao)
VALUES
('2025-02-10', NULL, 'Carlos Souza', NULL),
('2025-02-12', '2025-02-13', 'Mariana Lima', 'Roberto Alves'),

-- ðŸ“Œ Consultando a tabela Unidade
SELECT * FROM Unidade;

-- ðŸ“Œ Consultando a tabela Funcionario
SELECT * FROM Funcionario;

-- ðŸ“Œ Consultando a tabela Morador
SELECT * FROM Morador;

-- ðŸ“Œ Consultando a tabela Chave
SELECT * FROM Chave;

-- ðŸ“Œ Consultando a tabela Reserva
SELECT * FROM Reserva;

-- ðŸ“Œ Consultando a tabela Atividade
SELECT * FROM Atividade;

-- ðŸ“Œ Consultando a tabela ControleReserva
SELECT * FROM ControleReserva;

delete from chave where id_chave > 7 

</root>

